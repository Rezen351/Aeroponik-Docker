{"version":3,"file":"index.js","sources":["../dist-src/utils.js","../dist-src/parser.js","../dist-src/date.js","../dist-src/expression.js","../dist-src/scheduler.js","../dist-src/index.js"],"sourcesContent":["export const sortAsc = (a, b) => a - b;\r\nexport const sortDesc = (a, b) => b - a;\r\nexport function flatMap(arr, mapper) {\r\n    return arr.reduce((acc, val, i) => {\r\n        acc.push(...mapper(val, i, arr));\r\n        return acc;\r\n    }, []);\r\n}\r\n","import { sortAsc, sortDesc, flatMap } from './utils';\r\nconst predefinedCronStrings = {\r\n    '@yearly': '0 0 0 1 1 * *',\r\n    '@annually': '0 0 0 1 1 * *',\r\n    '@monthly': '0 0 0 1 * * *',\r\n    '@weekly': '0 0 0 * * 0 *',\r\n    '@daily': '0 0 0 * * * *',\r\n    '@midnight': '0 0 0 * * * *',\r\n    '@hourly': '0 0 * * * * *',\r\n};\r\nconst monthReplacements = ['jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec'];\r\nconst monthReplacementRegex = new RegExp(monthReplacements.join('|'), 'g');\r\nconst dayOfWeekReplacements = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];\r\nconst dayOfWeekReplacementRegex = new RegExp(dayOfWeekReplacements.join('|'), 'g');\r\n/*\r\n\"The actual range of times supported by ECMAScript Date objects is slightly smaller:\r\n  exactly â€“100,000,000 days to 100,000,000 days measured relative to midnight at the\r\n  beginning of 01 January, 1970 UTC. This gives a range of 8,640,000,000,000,000\r\n  milliseconds to either side of 01 January, 1970 UTC.\"\r\nhttp://ecma-international.org/ecma-262/5.1/#sec-15.9.1.1\r\n\r\nnew Date(8640000000000000) => 00:00:00 13th Sep 275760\r\nLargest full year valid as JS date = 275759\r\n*/\r\nconst maxValidYear = 275759;\r\nconst minValidYear = 1;\r\nexport var WarningType;\r\n(function (WarningType) {\r\n    WarningType[\"IncrementLargerThanRange\"] = \"IncrementLargerThanRange\";\r\n})(WarningType || (WarningType = {}));\r\nexport function _parse(cronstring) {\r\n    let expr = cronstring.trim().toLowerCase();\r\n    if (predefinedCronStrings[expr]) {\r\n        expr = predefinedCronStrings[expr];\r\n    }\r\n    const fields = expr.split(/\\s+/g);\r\n    if (fields.length < 5 || fields.length > 7) {\r\n        throw new Error('Expression must have at least 5 fields, and no more than 7 fields');\r\n    }\r\n    switch (fields.length) {\r\n        case 5:\r\n            fields.unshift('0');\r\n        case 6:\r\n            fields.push('*');\r\n    }\r\n    return [\r\n        new SecondsOrMinutesField(fields[0]),\r\n        new SecondsOrMinutesField(fields[1]),\r\n        new HoursField(fields[2]),\r\n        new DaysField(fields[3], fields[5]),\r\n        new MonthsField(fields[4]),\r\n        new YearsField(fields[6])\r\n    ];\r\n}\r\nfunction getIncrementLargerThanRangeWarnings(items, first, last) {\r\n    const warnings = [];\r\n    for (let item of items) {\r\n        let rangeLength;\r\n        if (item.step > 1 &&\r\n            item.step > (rangeLength = item.rangeLength(first, last))) {\r\n            warnings.push({\r\n                type: WarningType.IncrementLargerThanRange,\r\n                message: `Increment (${item.step}) is larger than range (${rangeLength}) for expression '${item.itemString}'`\r\n            });\r\n        }\r\n    }\r\n    return warnings;\r\n}\r\nclass Field {\r\n    constructor(field) {\r\n        this.field = field;\r\n    }\r\n    parse() {\r\n        return this.field.split(',')\r\n            .map(item => FieldItem.parse(item, this.first, this.last, true));\r\n    }\r\n    get items() {\r\n        if (!this._items)\r\n            this._items = this.parse();\r\n        return this._items;\r\n    }\r\n    get values() {\r\n        return Field.getValues(this.items, this.first, this.last);\r\n    }\r\n    get warnings() {\r\n        return getIncrementLargerThanRangeWarnings(this.items, this.first, this.last);\r\n    }\r\n    static getValues(items, first, last) {\r\n        return Array.from(new Set(flatMap(items, item => item.values(first, last)))).sort(sortAsc);\r\n    }\r\n}\r\nclass FieldItem {\r\n    constructor(itemString) {\r\n        this.itemString = itemString;\r\n        this.step = 1;\r\n    }\r\n    rangeLength(first, last) {\r\n        var _a, _b, _c, _d;\r\n        const start = (_b = (_a = this.range) === null || _a === void 0 ? void 0 : _a.from) !== null && _b !== void 0 ? _b : first, end = (_d = (_c = this.range) === null || _c === void 0 ? void 0 : _c.to) !== null && _d !== void 0 ? _d : last;\r\n        return (end < start) ? ((last - start) + (end - first) + 1) : (end - start);\r\n    }\r\n    values(first, last) {\r\n        const start = this.range ? this.range.from : first, rangeLength = this.rangeLength(first, last);\r\n        return Array(Math.floor(rangeLength / this.step) + 1)\r\n            .fill(0)\r\n            .map((_, i) => first + ((start - first + (this.step * i)) % (last - first + 1)));\r\n    }\r\n    get any() {\r\n        return this.range === undefined && this.step === 1;\r\n    }\r\n    get single() {\r\n        return !!this.range && this.range.from === this.range.to;\r\n    }\r\n    static parse(item, first, last, allowCyclicRange = false, transformer) {\r\n        var _a;\r\n        const fieldItem = new FieldItem(item);\r\n        const [match, all, startFrom, range, step] = ((_a = item.match(/^(?:(\\*)|([0-9]+)|([0-9]+-[0-9]+))(?:\\/([1-9][0-9]*))?$/)) !== null && _a !== void 0 ? _a : []);\r\n        if (!match)\r\n            throw new Error('Field item invalid format');\r\n        if (step) {\r\n            fieldItem.step = parseInt(step, 10);\r\n        }\r\n        if (startFrom) {\r\n            let start = parseInt(startFrom, 10);\r\n            start = transformer ? transformer(start) : start;\r\n            if (start < first || start > last)\r\n                throw new Error('Field item out of valid value range');\r\n            fieldItem.range = {\r\n                from: start,\r\n                to: step ? undefined : start\r\n            };\r\n        }\r\n        else if (range) {\r\n            const [rangeStart, rangeEnd] = range.split('-').map(x => {\r\n                const n = parseInt(x, 10);\r\n                return transformer ? transformer(n) : n;\r\n            });\r\n            if (rangeStart < first || rangeStart > last || rangeEnd < first || rangeEnd > last ||\r\n                (rangeEnd < rangeStart && !allowCyclicRange)) {\r\n                throw new Error('Field item range invalid, either value out of valid range or start greater than end in non wraparound field');\r\n            }\r\n            fieldItem.range = {\r\n                from: rangeStart,\r\n                to: rangeEnd\r\n            };\r\n        }\r\n        return fieldItem;\r\n    }\r\n}\r\nFieldItem.asterisk = new FieldItem('*');\r\nexport class SecondsOrMinutesField extends Field {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.first = 0;\r\n        this.last = 59;\r\n    }\r\n}\r\nexport class HoursField extends Field {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.first = 0;\r\n        this.last = 23;\r\n    }\r\n}\r\nexport class DaysField {\r\n    constructor(daysOfMonthField, daysOfWeekField) {\r\n        this.lastDay = false;\r\n        this.lastWeekday = false;\r\n        this.daysItems = [];\r\n        this.nearestWeekdayItems = [];\r\n        this.daysOfWeekItems = [];\r\n        this.lastDaysOfWeekItems = [];\r\n        this.nthDaysOfWeekItems = [];\r\n        for (let item of daysOfMonthField.split(',').map(s => s === '?' ? '*' : s)) {\r\n            if (item === 'l') {\r\n                this.lastDay = true;\r\n            }\r\n            else if (item === 'lw') {\r\n                this.lastWeekday = true;\r\n            }\r\n            else if (item.endsWith('w')) {\r\n                this.nearestWeekdayItems.push(FieldItem.parse(item.slice(0, -1), 1, 31));\r\n            }\r\n            else {\r\n                this.daysItems.push(FieldItem.parse(item, 1, 31));\r\n            }\r\n        }\r\n        const normalisedDaysOfWeekField = daysOfWeekField.replace(dayOfWeekReplacementRegex, match => dayOfWeekReplacements.indexOf(match) + '');\r\n        const parseDayOfWeek = (item) => FieldItem.parse(item, 0, 6, true, n => n === 7 ? 0 : n);\r\n        for (let item of normalisedDaysOfWeekField.split(',').map(s => s === '?' ? '*' : s)) {\r\n            const nthIndex = item.lastIndexOf('#');\r\n            if (item.endsWith('l')) {\r\n                this.lastDaysOfWeekItems.push(parseDayOfWeek(item.slice(0, -1)));\r\n            }\r\n            else if (nthIndex !== -1) {\r\n                const nth = item.slice(nthIndex + 1);\r\n                if (!/^[1-5]$/.test(nth))\r\n                    throw new Error('Field item nth of month (#) invalid');\r\n                this.nthDaysOfWeekItems.push({\r\n                    item: parseDayOfWeek(item.slice(0, nthIndex)),\r\n                    nth: parseInt(nth, 10)\r\n                });\r\n            }\r\n            else {\r\n                this.daysOfWeekItems.push(parseDayOfWeek(item));\r\n            }\r\n        }\r\n    }\r\n    get values() {\r\n        return DaysFieldValues.fromField(this);\r\n    }\r\n    get warnings() {\r\n        const warnings = [], dayItems = [\r\n            ...this.daysItems,\r\n            ...this.nearestWeekdayItems,\r\n        ], weekItems = [\r\n            ...this.daysOfWeekItems,\r\n            ...this.lastDaysOfWeekItems,\r\n            ...this.nthDaysOfWeekItems.map(({ item }) => item),\r\n        ];\r\n        warnings.push(...getIncrementLargerThanRangeWarnings(dayItems, 1, 31), ...getIncrementLargerThanRangeWarnings(weekItems, 0, 6));\r\n        return warnings;\r\n    }\r\n    get allDays() {\r\n        return (!this.lastDay &&\r\n            !this.lastWeekday &&\r\n            !this.nearestWeekdayItems.length &&\r\n            !this.lastDaysOfWeekItems.length &&\r\n            !this.nthDaysOfWeekItems.length &&\r\n            this.daysItems.length === 1 && this.daysItems[0].any &&\r\n            this.daysOfWeekItems.length === 1 && this.daysOfWeekItems[0].any);\r\n    }\r\n}\r\nexport class DaysFieldValues {\r\n    constructor() {\r\n        this.lastDay = false;\r\n        this.lastWeekday = false;\r\n        this.days = [];\r\n        this.nearestWeekday = [];\r\n        this.daysOfWeek = [];\r\n        this.lastDaysOfWeek = [];\r\n        this.nthDaysOfWeek = [];\r\n    }\r\n    static fromField(field) {\r\n        const values = new DaysFieldValues();\r\n        const filterAnyItems = (items) => items.filter(item => !item.any);\r\n        values.lastDay = field.lastDay;\r\n        values.lastWeekday = field.lastWeekday;\r\n        values.days = Field.getValues(field.allDays ? [FieldItem.asterisk] : filterAnyItems(field.daysItems), 1, 31);\r\n        values.nearestWeekday = Field.getValues(field.nearestWeekdayItems, 1, 31);\r\n        values.daysOfWeek = Field.getValues(filterAnyItems(field.daysOfWeekItems), 0, 6);\r\n        values.lastDaysOfWeek = Field.getValues(field.lastDaysOfWeekItems, 0, 6);\r\n        const nthDaysHashes = new Set();\r\n        for (let item of field.nthDaysOfWeekItems) {\r\n            for (let n of item.item.values(0, 6)) {\r\n                let hash = n * 10 + item.nth;\r\n                if (!nthDaysHashes.has(hash)) {\r\n                    nthDaysHashes.add(hash);\r\n                    values.nthDaysOfWeek.push([n, item.nth]);\r\n                }\r\n            }\r\n        }\r\n        return values;\r\n    }\r\n    getDays(year, month) {\r\n        const days = new Set(this.days);\r\n        const lastDateOfMonth = new Date(year, month, 0).getDate();\r\n        const firstDayOfWeek = new Date(year, month - 1, 1).getDay();\r\n        const getNearestWeekday = (day) => {\r\n            if (day > lastDateOfMonth)\r\n                day = lastDateOfMonth;\r\n            const dayOfWeek = (day + firstDayOfWeek - 1) % 7;\r\n            let weekday = day + (dayOfWeek === 0 ? 1 : (dayOfWeek === 6 ? -1 : 0));\r\n            return weekday + (weekday < 1 ? 3 : (weekday > lastDateOfMonth ? -3 : 0));\r\n        };\r\n        if (this.lastDay) {\r\n            days.add(lastDateOfMonth);\r\n        }\r\n        if (this.lastWeekday) {\r\n            days.add(getNearestWeekday(lastDateOfMonth));\r\n        }\r\n        for (const day of this.nearestWeekday) {\r\n            days.add(getNearestWeekday(day));\r\n        }\r\n        if (this.daysOfWeek.length ||\r\n            this.lastDaysOfWeek.length ||\r\n            this.nthDaysOfWeek.length) {\r\n            const daysOfWeek = Array(7).fill(0).map(() => ([]));\r\n            for (let day = 1; day < 36; day++) {\r\n                daysOfWeek[(day + firstDayOfWeek - 1) % 7].push(day);\r\n            }\r\n            for (const dayOfWeek of this.daysOfWeek) {\r\n                for (const day of daysOfWeek[dayOfWeek]) {\r\n                    days.add(day);\r\n                }\r\n            }\r\n            for (const dayOfWeek of this.lastDaysOfWeek) {\r\n                for (let i = daysOfWeek[dayOfWeek].length - 1; i >= 0; i--) {\r\n                    if (daysOfWeek[dayOfWeek][i] <= lastDateOfMonth) {\r\n                        days.add(daysOfWeek[dayOfWeek][i]);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            for (const [dayOfWeek, nthOfMonth] of this.nthDaysOfWeek) {\r\n                days.add(daysOfWeek[dayOfWeek][nthOfMonth - 1]);\r\n            }\r\n        }\r\n        return Array.from(days).filter(day => day <= lastDateOfMonth).sort(sortAsc);\r\n    }\r\n}\r\nexport class MonthsField extends Field {\r\n    constructor(field) {\r\n        super(field.replace(monthReplacementRegex, match => {\r\n            return monthReplacements.indexOf(match) + 1 + '';\r\n        }));\r\n        this.first = 1;\r\n        this.last = 12;\r\n    }\r\n}\r\nexport class YearsField extends Field {\r\n    constructor(field) {\r\n        super(field);\r\n        this.first = 1970;\r\n        this.last = 2099;\r\n        this.items;\r\n    }\r\n    parse() {\r\n        return this.field.split(',')\r\n            .map(item => FieldItem.parse(item, 0, maxValidYear));\r\n    }\r\n    get warnings() {\r\n        return getIncrementLargerThanRangeWarnings(this.items, this.first, maxValidYear);\r\n    }\r\n    nextYear(fromYear) {\r\n        var _a;\r\n        return (_a = this.items.reduce((years, item) => {\r\n            var _a, _b, _c, _d;\r\n            if (item.any)\r\n                years.push(fromYear);\r\n            else if (item.single) {\r\n                const year = item.range.from;\r\n                if (year >= fromYear)\r\n                    years.push(year);\r\n            }\r\n            else {\r\n                const start = (_b = (_a = item.range) === null || _a === void 0 ? void 0 : _a.from) !== null && _b !== void 0 ? _b : this.first;\r\n                if (start > fromYear)\r\n                    years.push(start);\r\n                else {\r\n                    const nextYear = start + Math.ceil((fromYear - start) / item.step) * item.step;\r\n                    if (nextYear <= ((_d = (_c = item.range) === null || _c === void 0 ? void 0 : _c.to) !== null && _d !== void 0 ? _d : maxValidYear))\r\n                        years.push(nextYear);\r\n                }\r\n            }\r\n            return years;\r\n        }, []).sort(sortAsc)[0]) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    previousYear(fromYear) {\r\n        var _a;\r\n        return (_a = this.items.reduce((years, item) => {\r\n            var _a, _b, _c, _d;\r\n            if (item.any)\r\n                years.push(fromYear);\r\n            else if (item.single) {\r\n                const year = item.range.from;\r\n                if (year <= fromYear)\r\n                    years.push(year);\r\n            }\r\n            else {\r\n                const end = (_b = (_a = item.range) === null || _a === void 0 ? void 0 : _a.to) !== null && _b !== void 0 ? _b : this.last;\r\n                if (end < fromYear)\r\n                    years.push(end);\r\n                else {\r\n                    const prevYear = end - Math.ceil((end - fromYear) / item.step) * item.step;\r\n                    if (prevYear >= ((_d = (_c = item.range) === null || _c === void 0 ? void 0 : _c.from) !== null && _d !== void 0 ? _d : minValidYear))\r\n                        years.push(prevYear);\r\n                }\r\n            }\r\n            return years;\r\n        }, []).sort(sortDesc)[0]) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n}\r\n","export class CronosDate {\r\n    constructor(year, month = 1, day = 1, hour = 0, minute = 0, second = 0) {\r\n        this.year = year;\r\n        this.month = month;\r\n        this.day = day;\r\n        this.hour = hour;\r\n        this.minute = minute;\r\n        this.second = second;\r\n    }\r\n    static fromDate(date, timezone) {\r\n        if (!timezone) {\r\n            return new CronosDate(date.getFullYear(), date.getMonth() + 1, date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds());\r\n        }\r\n        return timezone['nativeDateToCronosDate'](date);\r\n    }\r\n    toDate(timezone) {\r\n        if (!timezone) {\r\n            return new Date(this.year, this.month - 1, this.day, this.hour, this.minute, this.second);\r\n        }\r\n        return timezone['cronosDateToNativeDate'](this);\r\n    }\r\n    static fromUTCTimestamp(timestamp) {\r\n        const date = new Date(timestamp);\r\n        return new CronosDate(date.getUTCFullYear(), date.getUTCMonth() + 1, date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\r\n    }\r\n    toUTCTimestamp() {\r\n        return Date.UTC(this.year, this.month - 1, this.day, this.hour, this.minute, this.second);\r\n    }\r\n    copyWith({ year = this.year, month = this.month, day = this.day, hour = this.hour, minute = this.minute, second = this.second } = {}) {\r\n        return new CronosDate(year, month, day, hour, minute, second);\r\n    }\r\n}\r\n// Adapted from Intl.DateTimeFormat timezone handling in https://github.com/moment/luxon\r\nconst ZoneCache = new Map();\r\nexport class CronosTimezone {\r\n    constructor(IANANameOrOffset) {\r\n        if (typeof IANANameOrOffset === 'number') {\r\n            if (IANANameOrOffset > 840 || IANANameOrOffset < -840)\r\n                throw new Error('Invalid offset');\r\n            this.fixedOffset = IANANameOrOffset;\r\n            return this;\r\n        }\r\n        const offsetMatch = IANANameOrOffset.match(/^([+-]?)(0[1-9]|1[0-4])(?::?([0-5][0-9]))?$/);\r\n        if (offsetMatch) {\r\n            this.fixedOffset = (offsetMatch[1] === '-' ? -1 : 1) * ((parseInt(offsetMatch[2], 10) * 60) + (parseInt(offsetMatch[3], 10) || 0));\r\n            return this;\r\n        }\r\n        if (ZoneCache.has(IANANameOrOffset)) {\r\n            return ZoneCache.get(IANANameOrOffset);\r\n        }\r\n        try {\r\n            this.dateTimeFormat = new Intl.DateTimeFormat(\"en-US\", {\r\n                hour12: false,\r\n                timeZone: IANANameOrOffset,\r\n                year: \"numeric\",\r\n                month: \"2-digit\",\r\n                day: \"2-digit\",\r\n                hour: \"2-digit\",\r\n                minute: \"2-digit\",\r\n                second: \"2-digit\"\r\n            });\r\n        }\r\n        catch (err) {\r\n            throw new Error('Invalid IANA name or offset');\r\n        }\r\n        this.zoneName = IANANameOrOffset;\r\n        const currentYear = new Date().getUTCFullYear();\r\n        this.winterOffset = this.offset(Date.UTC(currentYear, 0, 1));\r\n        this.summerOffset = this.offset(Date.UTC(currentYear, 5, 1));\r\n        ZoneCache.set(IANANameOrOffset, this);\r\n    }\r\n    toString() {\r\n        if (this.fixedOffset) {\r\n            const absOffset = Math.abs(this.fixedOffset);\r\n            return [\r\n                this.fixedOffset < 0 ? '-' : '+',\r\n                Math.floor(absOffset / 60).toString().padStart(2, '0'),\r\n                (absOffset % 60).toString().padStart(2, '0')\r\n            ].join('');\r\n        }\r\n        return this.zoneName;\r\n    }\r\n    offset(ts) {\r\n        if (!this.dateTimeFormat)\r\n            return this.fixedOffset || 0;\r\n        const date = new Date(ts);\r\n        const { year, month, day, hour, minute, second } = this.nativeDateToCronosDate(date);\r\n        const asUTC = Date.UTC(year, month - 1, day, hour, minute, second), asTS = ts - (ts % 1000);\r\n        return (asUTC - asTS) / 60000;\r\n    }\r\n    nativeDateToCronosDate(date) {\r\n        if (!this.dateTimeFormat) {\r\n            return CronosDate['fromUTCTimestamp'](date.getTime() + (this.fixedOffset || 0) * 60000);\r\n        }\r\n        return this.dateTimeFormat['formatToParts']\r\n            ? partsOffset(this.dateTimeFormat, date)\r\n            : hackyOffset(this.dateTimeFormat, date);\r\n    }\r\n    cronosDateToNativeDate(date) {\r\n        if (!this.dateTimeFormat) {\r\n            return new Date(date['toUTCTimestamp']() - (this.fixedOffset || 0) * 60000);\r\n        }\r\n        const provisionalOffset = ((date.month > 3 || date.month < 11) ? this.summerOffset : this.winterOffset) || 0;\r\n        const UTCTimestamp = date['toUTCTimestamp']();\r\n        // Find the right offset a given local time.\r\n        // Our UTC time is just a guess because our offset is just a guess\r\n        let utcGuess = UTCTimestamp - provisionalOffset * 60000;\r\n        // Test whether the zone matches the offset for this ts\r\n        const o2 = this.offset(utcGuess);\r\n        // If so, offset didn't change and we're done\r\n        if (provisionalOffset === o2)\r\n            return new Date(utcGuess);\r\n        // If not, change the ts by the difference in the offset\r\n        utcGuess -= (o2 - provisionalOffset) * 60000;\r\n        // If that gives us the local time we want, we're done\r\n        const o3 = this.offset(utcGuess);\r\n        if (o2 === o3)\r\n            return new Date(utcGuess);\r\n        // If it's different, we're in a hole time. The offset has changed, but the we don't adjust the time\r\n        return new Date(UTCTimestamp - Math.min(o2, o3) * 60000);\r\n    }\r\n}\r\nfunction hackyOffset(dtf, date) {\r\n    const formatted = dtf.format(date).replace(/\\u200E/g, \"\"), parsed = formatted.match(/(\\d+)\\/(\\d+)\\/(\\d+),? (\\d+):(\\d+):(\\d+)/), [, month, day, year, hour, minute, second] = (parsed !== null && parsed !== void 0 ? parsed : []).map(n => parseInt(n, 10));\r\n    return new CronosDate(year, month, day, hour % 24, minute, second);\r\n}\r\nfunction partsOffset(dtf, date) {\r\n    const formatted = dtf.formatToParts(date);\r\n    return new CronosDate(parseInt(formatted[4].value, 10), parseInt(formatted[0].value, 10), parseInt(formatted[2].value, 10), parseInt(formatted[6].value, 10) % 24, parseInt(formatted[8].value, 10), parseInt(formatted[10].value, 10));\r\n}\r\n","import { _parse } from './parser';\r\nimport { CronosDate, CronosTimezone } from './date';\r\nimport { flatMap } from './utils';\r\nconst hourinms = 60 * 60 * 1000;\r\nconst maxYears = 2000;\r\nconst findFirstFrom = (from, list) => list.findIndex(n => n >= from);\r\nconst findLastFrom = (from, list) => {\r\n    const index = list.slice().reverse().findIndex(n => n <= from);\r\n    return index === -1 ? -1 : list.length - 1 - index;\r\n};\r\nexport class CronosExpression {\r\n    constructor(cronString, seconds, minutes, hours, days, months, years) {\r\n        this.cronString = cronString;\r\n        this.seconds = seconds;\r\n        this.minutes = minutes;\r\n        this.hours = hours;\r\n        this.days = days;\r\n        this.months = months;\r\n        this.years = years;\r\n        this.skipRepeatedHour = true;\r\n        this.missingHour = 'insert';\r\n        this._warnings = null;\r\n    }\r\n    static parse(cronstring, options = {}) {\r\n        var _a;\r\n        const parsedFields = _parse(cronstring);\r\n        if (options.strict) {\r\n            let warnings = flatMap(parsedFields, field => field.warnings);\r\n            if (typeof options.strict === 'object') {\r\n                warnings = warnings\r\n                    .filter(warning => !!options.strict[warning.type]);\r\n            }\r\n            if (warnings.length > 0) {\r\n                throw new Error(`Strict mode: Parsing failed with ${warnings.length} warnings`);\r\n            }\r\n        }\r\n        const expr = new CronosExpression(cronstring, parsedFields[0].values, parsedFields[1].values, parsedFields[2].values, parsedFields[3].values, parsedFields[4].values, parsedFields[5]);\r\n        expr.timezone = options.timezone instanceof CronosTimezone ? options.timezone :\r\n            (options.timezone !== undefined ? new CronosTimezone(options.timezone) : undefined);\r\n        expr.skipRepeatedHour = options.skipRepeatedHour !== undefined ? options.skipRepeatedHour : expr.skipRepeatedHour;\r\n        expr.missingHour = (_a = options.missingHour) !== null && _a !== void 0 ? _a : expr.missingHour;\r\n        return expr;\r\n    }\r\n    get warnings() {\r\n        if (!this._warnings) {\r\n            const parsedFields = _parse(this.cronString);\r\n            this._warnings = flatMap(parsedFields, field => field.warnings);\r\n        }\r\n        return this._warnings;\r\n    }\r\n    toString() {\r\n        var _a, _b;\r\n        const showTzOpts = !this.timezone || !!this.timezone.zoneName;\r\n        const timezone = Object.entries({\r\n            tz: (_b = (_a = this.timezone) === null || _a === void 0 ? void 0 : _a.toString()) !== null && _b !== void 0 ? _b : 'Local',\r\n            skipRepeatedHour: showTzOpts && this.skipRepeatedHour.toString(),\r\n            missingHour: showTzOpts && this.missingHour,\r\n        }).map(([key, val]) => val && key + ': ' + val).filter(s => s).join(', ');\r\n        return `${this.cronString} (${timezone})`;\r\n    }\r\n    // next dates\r\n    nextDate(afterDate = new Date()) {\r\n        var _a;\r\n        const fromCronosDate = CronosDate.fromDate(afterDate, this.timezone);\r\n        if (((_a = this.timezone) === null || _a === void 0 ? void 0 : _a.fixedOffset) !== undefined) {\r\n            return this._next(fromCronosDate).date;\r\n        }\r\n        const fromTimestamp = afterDate.getTime(), fromLocalTimestamp = fromCronosDate['toUTCTimestamp'](), prevHourLocalTimestamp = CronosDate.fromDate(new Date(fromTimestamp - hourinms), this.timezone)['toUTCTimestamp'](), nextHourLocalTimestamp = CronosDate.fromDate(new Date(fromTimestamp + hourinms), this.timezone)['toUTCTimestamp'](), nextHourRepeated = nextHourLocalTimestamp - fromLocalTimestamp === 0, thisHourRepeated = fromLocalTimestamp - prevHourLocalTimestamp === 0, thisHourMissing = fromLocalTimestamp - prevHourLocalTimestamp === hourinms * 2;\r\n        if (this.skipRepeatedHour && thisHourRepeated) {\r\n            return this._next(fromCronosDate.copyWith({ minute: 59, second: 60 }), false).date;\r\n        }\r\n        if (this.missingHour === 'offset' && thisHourMissing) {\r\n            const nextDate = this._next(fromCronosDate.copyWith({ hour: fromCronosDate.hour - 1 })).date;\r\n            if (!nextDate || nextDate.getTime() > fromTimestamp)\r\n                return nextDate;\r\n        }\r\n        let { date: nextDate, cronosDate: nextCronosDate } = this._next(fromCronosDate);\r\n        if (this.missingHour !== 'offset' && nextCronosDate && nextDate) {\r\n            const nextDateNextHourTimestamp = nextCronosDate.copyWith({ hour: nextCronosDate.hour + 1 }).toDate(this.timezone).getTime();\r\n            if (nextDateNextHourTimestamp === nextDate.getTime()) {\r\n                if (this.missingHour === 'insert') {\r\n                    return nextCronosDate.copyWith({ minute: 0, second: 0 }).toDate(this.timezone);\r\n                }\r\n                // this.missingHour === 'skip'\r\n                return this._next(nextCronosDate.copyWith({ minute: 59, second: 59 })).date;\r\n            }\r\n        }\r\n        if (!this.skipRepeatedHour) {\r\n            if (nextHourRepeated && (!nextDate || (nextDate.getTime() > fromTimestamp + hourinms))) {\r\n                nextDate = this._next(fromCronosDate.copyWith({ minute: 0, second: 0 }), false).date;\r\n            }\r\n            if (nextDate && nextDate < afterDate) {\r\n                nextDate = new Date(nextDate.getTime() + hourinms);\r\n            }\r\n        }\r\n        return nextDate;\r\n    }\r\n    _next(date, after = true) {\r\n        const nextDate = this._nextYear(after ? date.copyWith({ second: date.second + 1 }) : date);\r\n        return {\r\n            cronosDate: nextDate,\r\n            date: nextDate ? nextDate.toDate(this.timezone) : null\r\n        };\r\n    }\r\n    nextNDates(afterDate = new Date(), n = 5) {\r\n        const dates = [];\r\n        let lastDate = afterDate;\r\n        for (let i = 0; i < n; i++) {\r\n            const date = this.nextDate(lastDate);\r\n            if (!date)\r\n                break;\r\n            lastDate = date;\r\n            dates.push(date);\r\n        }\r\n        return dates;\r\n    }\r\n    _nextYear(fromDate) {\r\n        let year = fromDate.year;\r\n        let nextDate = null;\r\n        while (!nextDate) {\r\n            year = this.years.nextYear(year);\r\n            if (year === null || year >= fromDate.year + maxYears)\r\n                return null;\r\n            nextDate = this._nextMonth((year === fromDate.year) ? fromDate : new CronosDate(year));\r\n            year++;\r\n        }\r\n        return nextDate;\r\n    }\r\n    _nextMonth(fromDate) {\r\n        let nextMonthIndex = findFirstFrom(fromDate.month, this.months);\r\n        let nextDate = null;\r\n        while (!nextDate) {\r\n            const nextMonth = this.months[nextMonthIndex];\r\n            if (nextMonth === undefined)\r\n                return null;\r\n            nextDate = this._nextDay((nextMonth === fromDate.month) ? fromDate : new CronosDate(fromDate.year, nextMonth));\r\n            nextMonthIndex++;\r\n        }\r\n        return nextDate;\r\n    }\r\n    _nextDay(fromDate) {\r\n        const days = this.days.getDays(fromDate.year, fromDate.month);\r\n        let nextDayIndex = findFirstFrom(fromDate.day, days);\r\n        let nextDate = null;\r\n        while (!nextDate) {\r\n            const nextDay = days[nextDayIndex];\r\n            if (nextDay === undefined)\r\n                return null;\r\n            nextDate = this._nextHour((nextDay === fromDate.day) ? fromDate : new CronosDate(fromDate.year, fromDate.month, nextDay));\r\n            nextDayIndex++;\r\n        }\r\n        return nextDate;\r\n    }\r\n    _nextHour(fromDate) {\r\n        let nextHourIndex = findFirstFrom(fromDate.hour, this.hours);\r\n        let nextDate = null;\r\n        while (!nextDate) {\r\n            const nextHour = this.hours[nextHourIndex];\r\n            if (nextHour === undefined)\r\n                return null;\r\n            nextDate = this._nextMinute((nextHour === fromDate.hour) ? fromDate :\r\n                new CronosDate(fromDate.year, fromDate.month, fromDate.day, nextHour));\r\n            nextHourIndex++;\r\n        }\r\n        return nextDate;\r\n    }\r\n    _nextMinute(fromDate) {\r\n        let nextMinuteIndex = findFirstFrom(fromDate.minute, this.minutes);\r\n        let nextDate = null;\r\n        while (!nextDate) {\r\n            const nextMinute = this.minutes[nextMinuteIndex];\r\n            if (nextMinute === undefined)\r\n                return null;\r\n            nextDate = this._nextSecond((nextMinute === fromDate.minute) ? fromDate :\r\n                new CronosDate(fromDate.year, fromDate.month, fromDate.day, fromDate.hour, nextMinute));\r\n            nextMinuteIndex++;\r\n        }\r\n        return nextDate;\r\n    }\r\n    _nextSecond(fromDate) {\r\n        const nextSecondIndex = findFirstFrom(fromDate.second, this.seconds), nextSecond = this.seconds[nextSecondIndex];\r\n        if (nextSecond === undefined)\r\n            return null;\r\n        return fromDate.copyWith({ second: nextSecond });\r\n    }\r\n    // previous dates\r\n    previousDate(beforeDate = new Date()) {\r\n        var _a;\r\n        const fromCronosDate = CronosDate.fromDate(beforeDate, this.timezone);\r\n        if (((_a = this.timezone) === null || _a === void 0 ? void 0 : _a.fixedOffset) !== undefined) {\r\n            return this._previous(fromCronosDate).date;\r\n        }\r\n        const fromTimestamp = beforeDate.getTime(), fromLocalTimestamp = fromCronosDate['toUTCTimestamp'](), prevHourLocalTimestamp = CronosDate.fromDate(new Date(fromTimestamp - hourinms), this.timezone)['toUTCTimestamp'](), nextHourLocalTimestamp = CronosDate.fromDate(new Date(fromTimestamp + hourinms), this.timezone)['toUTCTimestamp'](), prevHourRepeated = prevHourLocalTimestamp - fromLocalTimestamp === 0, thisHourRepeated = fromLocalTimestamp - nextHourLocalTimestamp === 0, thisHourMissing = fromLocalTimestamp - nextHourLocalTimestamp === hourinms * 2;\r\n        if (this.skipRepeatedHour && prevHourRepeated) {\r\n            return this._previous(fromCronosDate.copyWith({ minute: 0, second: -1 }), false).date;\r\n        }\r\n        if (this.missingHour === 'offset' && thisHourMissing) {\r\n            const previousDate = this._previous(fromCronosDate.copyWith({ hour: fromCronosDate.hour + 1 })).date;\r\n            if (!previousDate || previousDate.getTime() < fromTimestamp)\r\n                return previousDate;\r\n        }\r\n        let { date: previousDate, cronosDate: previousCronosDate } = this._previous(fromCronosDate);\r\n        if (this.missingHour !== 'offset' && previousCronosDate && previousDate) {\r\n            const previousDatePrevHourTimestamp = previousCronosDate.copyWith({ hour: previousCronosDate.hour - 1 }).toDate(this.timezone).getTime();\r\n            if (previousDatePrevHourTimestamp === previousDate.getTime()) {\r\n                if (this.missingHour === 'insert') {\r\n                    return previousCronosDate.copyWith({ minute: 59, second: 59 }).toDate(this.timezone);\r\n                }\r\n                // this.missingHour === 'skip'\r\n                return this._previous(previousCronosDate.copyWith({ minute: 0, second: 0 })).date;\r\n            }\r\n        }\r\n        if (!this.skipRepeatedHour) {\r\n            if (prevHourRepeated && (!previousDate || (previousDate.getTime() < fromTimestamp - hourinms))) {\r\n                previousDate = this._previous(fromCronosDate.copyWith({ minute: 59, second: 59 }), false).date;\r\n            }\r\n            if (previousDate && previousDate > beforeDate) {\r\n                previousDate = new Date(previousDate.getTime() - hourinms);\r\n            }\r\n        }\r\n        return previousDate;\r\n    }\r\n    _previous(date, before = true) {\r\n        const previousDate = this._previousYear(before ? date.copyWith({ second: date.second - 1 }) : date);\r\n        return {\r\n            cronosDate: previousDate,\r\n            date: previousDate ? previousDate.toDate(this.timezone) : null\r\n        };\r\n    }\r\n    previousNDates(beforeDate = new Date(), n = 5) {\r\n        const dates = [];\r\n        let lastDate = beforeDate;\r\n        for (let i = 0; i < n; i++) {\r\n            const date = this.previousDate(lastDate);\r\n            if (!date)\r\n                break;\r\n            lastDate = date;\r\n            dates.push(date);\r\n        }\r\n        return dates;\r\n    }\r\n    _previousYear(fromDate) {\r\n        let year = fromDate.year;\r\n        let previousDate = null;\r\n        while (!previousDate) {\r\n            year = this.years.previousYear(year);\r\n            if (year === null || year <= fromDate.year - maxYears)\r\n                return null;\r\n            previousDate = this._previousMonth((year === fromDate.year) ? fromDate : new CronosDate(year, 11, 31, 23, 59, 59));\r\n            year--;\r\n        }\r\n        return previousDate;\r\n    }\r\n    _previousMonth(fromDate) {\r\n        let previousMonthIndex = findLastFrom(fromDate.month, this.months);\r\n        let previousDate = null;\r\n        while (!previousDate) {\r\n            const previousMonth = this.months[previousMonthIndex];\r\n            if (previousMonth === undefined)\r\n                return null;\r\n            previousDate = this._previousDay((previousMonth === fromDate.month) ? fromDate : new CronosDate(fromDate.year, previousMonth, 31, 23, 59, 59));\r\n            previousMonthIndex--;\r\n        }\r\n        return previousDate;\r\n    }\r\n    _previousDay(fromDate) {\r\n        const days = this.days.getDays(fromDate.year, fromDate.month);\r\n        let previousDayIndex = findLastFrom(fromDate.day, days);\r\n        let previousDate = null;\r\n        while (!previousDate) {\r\n            const previousDay = days[previousDayIndex];\r\n            if (previousDay === undefined)\r\n                return null;\r\n            previousDate = this._previousHour(previousDay === fromDate.day\r\n                ? fromDate\r\n                : new CronosDate(fromDate.year, fromDate.month, previousDay, 23, 59, 59));\r\n            previousDayIndex--;\r\n        }\r\n        return previousDate;\r\n    }\r\n    _previousHour(fromDate) {\r\n        let previousHourIndex = findLastFrom(fromDate.hour, this.hours);\r\n        let previousDate = null;\r\n        while (!previousDate) {\r\n            const previousHour = this.hours[previousHourIndex];\r\n            if (previousHour === undefined)\r\n                return null;\r\n            previousDate = this._previousMinute((previousHour === fromDate.hour)\r\n                ? fromDate\r\n                : new CronosDate(fromDate.year, fromDate.month, fromDate.day, previousHour, 59, 59));\r\n            previousHourIndex--;\r\n        }\r\n        return previousDate;\r\n    }\r\n    _previousMinute(fromDate) {\r\n        let previousMinuteIndex = findLastFrom(fromDate.minute, this.minutes);\r\n        let previousDate = null;\r\n        while (!previousDate) {\r\n            const previousMinute = this.minutes[previousMinuteIndex];\r\n            if (previousMinute === undefined)\r\n                return null;\r\n            previousDate = this._previousSecond((previousMinute === fromDate.minute)\r\n                ? fromDate\r\n                : new CronosDate(fromDate.year, fromDate.month, fromDate.day, fromDate.hour, previousMinute, 59));\r\n            previousMinuteIndex--;\r\n        }\r\n        return previousDate;\r\n    }\r\n    _previousSecond(fromDate) {\r\n        const previousSecondIndex = findLastFrom(fromDate.second, this.seconds), previousSecond = this.seconds[previousSecondIndex];\r\n        if (previousSecond === undefined)\r\n            return null;\r\n        return fromDate.copyWith({ second: previousSecond });\r\n    }\r\n}\r\n","const maxTimeout = Math.pow(2, 31) - 1;\r\nconst scheduledTasks = [];\r\nlet runningTimer = null;\r\nfunction addTask(task) {\r\n    if (task['_timestamp'] !== undefined) {\r\n        const insertIndex = scheduledTasks.findIndex(t => t['_timestamp'] < task['_timestamp']);\r\n        if (insertIndex >= 0)\r\n            scheduledTasks.splice(insertIndex, 0, task);\r\n        else\r\n            scheduledTasks.push(task);\r\n    }\r\n}\r\nfunction removeTask(task) {\r\n    const removeIndex = scheduledTasks.indexOf(task);\r\n    if (removeIndex >= 0)\r\n        scheduledTasks.splice(removeIndex, 1);\r\n    if (scheduledTasks.length === 0 && runningTimer) {\r\n        clearTimeout(runningTimer);\r\n        runningTimer = null;\r\n    }\r\n}\r\nfunction runScheduledTasks(skipRun = false) {\r\n    if (runningTimer)\r\n        clearTimeout(runningTimer);\r\n    const now = Date.now();\r\n    const removeIndex = scheduledTasks.findIndex(task => task['_timestamp'] <= now);\r\n    const tasksToRun = removeIndex >= 0 ? scheduledTasks.splice(removeIndex) : [];\r\n    for (let task of tasksToRun) {\r\n        if (!skipRun)\r\n            task['_runTask']();\r\n        if (task.isRunning) {\r\n            task['_updateTimestamp']();\r\n            addTask(task);\r\n        }\r\n    }\r\n    const nextTask = scheduledTasks[scheduledTasks.length - 1];\r\n    if (nextTask) {\r\n        runningTimer = setTimeout(runScheduledTasks, Math.min(nextTask['_timestamp'] - Date.now(), maxTimeout));\r\n    }\r\n    else\r\n        runningTimer = null;\r\n}\r\nexport function refreshSchedulerTimer() {\r\n    for (const task of scheduledTasks) {\r\n        task['_updateTimestamp']();\r\n        if (!task.isRunning)\r\n            removeTask(task);\r\n    }\r\n    scheduledTasks.sort((a, b) => b['_timestamp'] - a['_timestamp']);\r\n    runScheduledTasks(true);\r\n}\r\nclass DateArraySequence {\r\n    constructor(dateLikes) {\r\n        this._dates = dateLikes.map(dateLike => {\r\n            const date = new Date(dateLike);\r\n            if (isNaN(date.getTime()))\r\n                throw new Error('Invalid date');\r\n            return date;\r\n        }).sort((a, b) => a.getTime() - b.getTime());\r\n    }\r\n    nextDate(afterDate) {\r\n        const nextIndex = this._dates.findIndex(d => d > afterDate);\r\n        return nextIndex === -1 ? null : this._dates[nextIndex];\r\n    }\r\n}\r\nexport class CronosTask {\r\n    constructor(sequenceOrDates) {\r\n        this._listeners = {\r\n            'started': new Set(),\r\n            'stopped': new Set(),\r\n            'run': new Set(),\r\n            'ended': new Set(),\r\n        };\r\n        if (Array.isArray(sequenceOrDates))\r\n            this._sequence = new DateArraySequence(sequenceOrDates);\r\n        else if (typeof sequenceOrDates === 'string' ||\r\n            typeof sequenceOrDates === 'number' ||\r\n            sequenceOrDates instanceof Date)\r\n            this._sequence = new DateArraySequence([sequenceOrDates]);\r\n        else\r\n            this._sequence = sequenceOrDates;\r\n    }\r\n    start() {\r\n        if (!this.isRunning) {\r\n            this._updateTimestamp();\r\n            addTask(this);\r\n            runScheduledTasks();\r\n            if (this.isRunning)\r\n                this._emit('started');\r\n        }\r\n        return this;\r\n    }\r\n    stop() {\r\n        if (this.isRunning) {\r\n            this._timestamp = undefined;\r\n            removeTask(this);\r\n            this._emit('stopped');\r\n        }\r\n        return this;\r\n    }\r\n    get nextRun() {\r\n        return this.isRunning ? new Date(this._timestamp) : undefined;\r\n    }\r\n    get isRunning() {\r\n        return this._timestamp !== undefined;\r\n    }\r\n    _runTask() {\r\n        this._emit('run', this._timestamp);\r\n    }\r\n    _updateTimestamp() {\r\n        const nextDate = this._sequence.nextDate(new Date());\r\n        this._timestamp = nextDate ? nextDate.getTime() : undefined;\r\n        if (!this.isRunning)\r\n            this._emit('ended');\r\n    }\r\n    on(event, listener) {\r\n        this._listeners[event].add(listener);\r\n        return this;\r\n    }\r\n    off(event, listener) {\r\n        this._listeners[event].delete(listener);\r\n        return this;\r\n    }\r\n    _emit(event, ...args) {\r\n        this._listeners[event].forEach((listener) => {\r\n            listener.call(this, ...args);\r\n        });\r\n    }\r\n}\r\n","import { CronosExpression } from \"./expression\";\r\nimport { CronosTask, refreshSchedulerTimer } from \"./scheduler\";\r\nimport { CronosTimezone } from \"./date\";\r\nexport function scheduleTask(cronString, task, options) {\r\n    const expression = CronosExpression.parse(cronString, options);\r\n    return new CronosTask(expression).on(\"run\", task).start();\r\n}\r\nexport function validate(cronString, options) {\r\n    try {\r\n        CronosExpression.parse(cronString, options);\r\n    }\r\n    catch {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nexport { CronosExpression, CronosTask, CronosTimezone, refreshSchedulerTimer };\r\n"],"names":["sortAsc","a","b","sortDesc","flatMap","arr","mapper","reduce","acc","val","i","push","predefinedCronStrings","monthReplacements","monthReplacementRegex","RegExp","join","dayOfWeekReplacements","dayOfWeekReplacementRegex","maxValidYear","minValidYear","WarningType","_parse","cronstring","expr","trim","toLowerCase","fields","split","length","Error","unshift","SecondsOrMinutesField","HoursField","DaysField","MonthsField","YearsField","getIncrementLargerThanRangeWarnings","items","first","last","warnings","item","rangeLength","step","type","IncrementLargerThanRange","message","itemString","Field","constructor","field","parse","map","FieldItem","_items","values","getValues","Array","from","Set","sort","_a","_b","_c","_d","start","range","end","to","Math","floor","fill","_","any","undefined","single","allowCyclicRange","transformer","fieldItem","match","all","startFrom","parseInt","rangeStart","rangeEnd","x","n","asterisk","arguments","daysOfMonthField","daysOfWeekField","lastDay","lastWeekday","daysItems","nearestWeekdayItems","daysOfWeekItems","lastDaysOfWeekItems","nthDaysOfWeekItems","s","endsWith","slice","normalisedDaysOfWeekField","replace","indexOf","parseDayOfWeek","nthIndex","lastIndexOf","nth","test","DaysFieldValues","fromField","dayItems","weekItems","allDays","days","nearestWeekday","daysOfWeek","lastDaysOfWeek","nthDaysOfWeek","filterAnyItems","filter","nthDaysHashes","hash","has","add","getDays","year","month","lastDateOfMonth","Date","getDate","firstDayOfWeek","getDay","getNearestWeekday","day","dayOfWeek","weekday","nthOfMonth","nextYear","fromYear","years","ceil","previousYear","prevYear","CronosDate","hour","minute","second","fromDate","date","timezone","getFullYear","getMonth","getHours","getMinutes","getSeconds","toDate","fromUTCTimestamp","timestamp","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","toUTCTimestamp","UTC","copyWith","ZoneCache","Map","CronosTimezone","IANANameOrOffset","fixedOffset","offsetMatch","get","dateTimeFormat","Intl","DateTimeFormat","hour12","timeZone","err","zoneName","currentYear","winterOffset","offset","summerOffset","set","toString","absOffset","abs","padStart","ts","nativeDateToCronosDate","asUTC","asTS","getTime","partsOffset","hackyOffset","cronosDateToNativeDate","provisionalOffset","UTCTimestamp","utcGuess","o2","o3","min","dtf","formatted","format","parsed","formatToParts","value","hourinms","maxYears","findFirstFrom","list","findIndex","findLastFrom","index","reverse","CronosExpression","cronString","seconds","minutes","hours","months","skipRepeatedHour","missingHour","_warnings","options","parsedFields","strict","warning","showTzOpts","Object","entries","tz","key","nextDate","afterDate","fromCronosDate","_next","fromTimestamp","fromLocalTimestamp","prevHourLocalTimestamp","nextHourLocalTimestamp","nextHourRepeated","thisHourRepeated","thisHourMissing","cronosDate","nextCronosDate","nextDateNextHourTimestamp","after","_nextYear","nextNDates","dates","lastDate","_nextMonth","nextMonthIndex","nextMonth","_nextDay","nextDayIndex","nextDay","_nextHour","nextHourIndex","nextHour","_nextMinute","nextMinuteIndex","nextMinute","_nextSecond","nextSecondIndex","nextSecond","previousDate","beforeDate","_previous","prevHourRepeated","previousCronosDate","previousDatePrevHourTimestamp","before","_previousYear","previousNDates","_previousMonth","previousMonthIndex","previousMonth","_previousDay","previousDayIndex","previousDay","_previousHour","previousHourIndex","previousHour","_previousMinute","previousMinuteIndex","previousMinute","_previousSecond","previousSecondIndex","previousSecond","maxTimeout","pow","scheduledTasks","runningTimer","addTask","task","insertIndex","t","splice","removeTask","removeIndex","clearTimeout","runScheduledTasks","skipRun","now","tasksToRun","isRunning","nextTask","setTimeout","refreshSchedulerTimer","DateArraySequence","dateLikes","_dates","dateLike","isNaN","nextIndex","d","CronosTask","sequenceOrDates","_listeners","isArray","_sequence","_updateTimestamp","_emit","stop","_timestamp","nextRun","_runTask","on","event","listener","off","delete","args","forEach","call","scheduleTask","expression","validate","_unused"],"mappings":"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"}